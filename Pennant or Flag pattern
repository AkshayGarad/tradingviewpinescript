//@version=4
study("Pennant or Flag Pattern", overlay=true)

// Define the trend lines
trendLine1 = hlines(highest(highest(high), length), color=orange, width=2)
trendLine2 = hlines(lowest(lowest(low), length), color=orange, width=2)

// Define the Pennant or Flag pattern
flag = trendLine1 and trendLine2

// Plot the Pennant or Flag pattern
plotshape(flag, title="Pennant or Flag", style=shape.triangleup, color=orange, location=location.belowbar)

// Add a label to the chart
label.new(bar_index, low, text=tostring(bar_index), xloc=xloc.bar_index, yloc=yloc.low, color=orange)